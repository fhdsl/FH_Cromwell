<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 FAQ and Reference | WDL 101: Running WDL workflows at Fred Hutch using Cromwell</title>
  <meta name="description" content="An introduction to using the workflow manager software Cromwell to run WDL based workflows using the Fred Hutch HPC cluster." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 FAQ and Reference | WDL 101: Running WDL workflows at Fred Hutch using Cromwell" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to using the workflow manager software Cromwell to run WDL based workflows using the Fred Hutch HPC cluster." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 FAQ and Reference | WDL 101: Running WDL workflows at Fred Hutch using Cromwell" />
  
  <meta name="twitter:description" content="An introduction to using the workflow manager software Cromwell to run WDL based workflows using the Fred Hutch HPC cluster." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/dasl_favicon.ico" type="image/x-icon" />
<link rel="prev" href="introduction.html"/>
<link rel="next" href="about-the-authors.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://hutchdatascience.org/" target="_blank"><img src="assets/FHDaSL_SQ-funfetti.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#available-course-formats"><i class="fa fa-check"></i><b>0.1</b> Available course formats</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#target-audience"><i class="fa fa-check"></i><b>1.2</b> Target Audience</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#content"><i class="fa fa-check"></i><b>1.3</b> Content</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#cromwell-resources"><i class="fa fa-check"></i><b>1.4</b> Cromwell Resources</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#steps-to-prepare"><i class="fa fa-check"></i><b>1.5</b> Steps to prepare</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#rhino-access-one-time"><i class="fa fa-check"></i><b>1.5.1</b> Rhino Access (one time)</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#aws-s3-access-optional-as-of-version-1.3"><i class="fa fa-check"></i><b>1.5.2</b> AWS S3 Access (optional as of version 1.3)</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction.html"><a href="introduction.html#database-setup-one-time"><i class="fa fa-check"></i><b>1.5.3</b> Database Setup (one time)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#server-setup-instructions"><i class="fa fa-check"></i><b>1.6</b> Server setup instructions</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#cromwell-server-customization"><i class="fa fa-check"></i><b>1.7</b> Cromwell Server Customization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="faq-and-reference.html"><a href="faq-and-reference.html"><i class="fa fa-check"></i><b>2</b> FAQ and Reference</a>
<ul>
<li class="chapter" data-level="2.1" data-path="faq-and-reference.html"><a href="faq-and-reference.html#test-workflows"><i class="fa fa-check"></i><b>2.1</b> Test Workflows</a></li>
<li class="chapter" data-level="2.2" data-path="faq-and-reference.html"><a href="faq-and-reference.html#fred-hutch-customization"><i class="fa fa-check"></i><b>2.2</b> Fred Hutch Customization</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="faq-and-reference.html"><a href="faq-and-reference.html#task-defaults-and-runtime-variables"><i class="fa fa-check"></i><b>2.2.1</b> Task Defaults and Runtime Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="faq-and-reference.html"><a href="faq-and-reference.html#guidance-and-support"><i class="fa fa-check"></i><b>2.3</b> Guidance and Support</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="faq-and-reference.html"><a href="faq-and-reference.html#monitoring-your-workflows-at-fred-hutch"><i class="fa fa-check"></i><b>2.3.1</b> Monitoring your workflows at Fred Hutch:</a></li>
<li class="chapter" data-level="2.3.2" data-path="faq-and-reference.html"><a href="faq-and-reference.html#design-recommendations-for-wdl-workflows-at-fred-hutch"><i class="fa fa-check"></i><b>2.3.2</b> Design Recommendations for WDL workflows at Fred Hutch</a></li>
<li class="chapter" data-level="2.3.3" data-path="faq-and-reference.html"><a href="faq-and-reference.html#r-support"><i class="fa fa-check"></i><b>2.3.3</b> R support</a></li>
<li class="chapter" data-level="2.3.4" data-path="faq-and-reference.html"><a href="faq-and-reference.html#other-fred-hutch-based-resources"><i class="fa fa-check"></i><b>2.3.4</b> Other Fred Hutch based resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="3" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>3</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="https://hutchdatascience.org/"> The Fred Hutch Data Science Lab </a></p>
<a href="https://hutchdatascience.org/"><img src="https://hutchdatascience.org/images/FHDataScienceLab_Rec_funfetti.png" style=" width: 80%; padding-left: 40px; padding-top: 8px; vertical-align: top "</a>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">WDL 101: Running WDL workflows at Fred Hutch using Cromwell</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/dasl_thin_main_image.png">
</div>
<div id="faq-and-reference" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> FAQ and Reference</h1>
<div id="test-workflows" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Test Workflows</h2>
<ol start="8" style="list-style-type: decimal">
<li>See our <a href="https://github.com/FredHutch/diy-cromwell-server/tree/main/testWorkflows">Test Workflow folder</a> once your server is up and run through the tests specified in the markdown there.
&gt; NOTE: For those test workflows that use Docker containers, know that the first time you run them, you may notice that jobs aren’t being sent very quickly. That is because for our cluster, we need to convert those Docker containers to something that can be run by Singularity. The first time a Docker container is used, it must be converted, but in the future Cromwell will used the cached version of the Docker container and jobs will be submitted more quickly.</li>
</ol>
</div>
<div id="fred-hutch-customization" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Fred Hutch Customization</h2>
<div id="task-defaults-and-runtime-variables" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Task Defaults and Runtime Variables</h3>
<p>For the gizmo backend, the following runtime variables are available that are customized to our configuration. What is specified below is the current default as written, you can edit these in the config file if you’d like OR you can specify these variables in your <code>runtime</code> block in each task to change only the variables you want to change from the default for that particular task.</p>
<ul>
<li><code>cpu = 1</code>
<ul>
<li>An integer number of cpus you want for the task</li>
</ul></li>
<li><code>walltime = "18:00:00"</code>
<ul>
<li>A string of date/time that specifies how many hours/days you want to request for the task</li>
</ul></li>
<li><code>memory = 2000</code>
<ul>
<li>An integer number of MB of memory you want to use for the task</li>
</ul></li>
<li><code>partition = "campus-new"</code>
<ul>
<li>Which partition you want to use, the default is <code>campus-new</code> but whatever is in the runtime block of your WDL will overrride this.</li>
</ul></li>
<li><code>modules = ""</code>
<ul>
<li>A space-separated list of the environment modules you’d like to have loaded (in that order) prior to running the task.<br />
</li>
</ul></li>
<li><code>docker = "ubuntu:latest"</code>
<ul>
<li>A specific Docker container to use for the task. For the custom Hutch configuration, docker containers can be specified and the necessary conversions (to Singularity) will be performed by Cromwell (not the user). Note: when docker is used, soft links cannot be used in our filesystem, so workflows using very large datasets may run slightly slower due to the need for Cromwell to copy files rather than link to them.<br />
</li>
</ul></li>
<li><code>dockerSL= "ubuntu:latest"</code>
<ul>
<li>This is a custom configuration for the Hutch that allows users to use docker and softlinks only to specific locations in Scratch. It is helpful when working with very large files.</li>
</ul></li>
</ul>
</div>
</div>
<div id="guidance-and-support" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Guidance and Support</h2>
<div id="monitoring-your-workflows-at-fred-hutch" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Monitoring your workflows at Fred Hutch:</h3>
<p>I made a shiny app you can use to monitor your own Cromwell server workflows when you have a Cromwell server running on <code>gizmo</code> that can be found <a href="https://cromwellapp.fredhutch.org/">here</a>. If you’d like to roll your own, you can find my shiny app code <a href="https://github.com/FredHutch/shiny-cromwell">here</a>.</p>
</div>
<div id="design-recommendations-for-wdl-workflows-at-fred-hutch" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Design Recommendations for WDL workflows at Fred Hutch</h3>
<p>See our <a href="https://sciwiki.fredhutch.org/compdemos/Cromwell/">SciWiki page</a> on Cromwell for more about guidance for how to start structuring and building your workflows as well as how to share them with others on campus in a findable way.</p>
</div>
<div id="r-support" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> R support</h3>
<p>I have a basic R package that wraps the Cromwell API allowing you to submit, monitor and kill workflow jobs on <code>gizmo</code> from R directly. The package is <a href="https://github.com/FredHutch/fh.wdlR">fh.wdlR</a>.</p>
</div>
<div id="other-fred-hutch-based-resources" class="section level3" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Other Fred Hutch based resources</h3>
<p>While additional development is going on to make Cromwell work better in AWS (currently it works well in Google and SLURM among other backends), we are anticipating that it will be more widely available for use with AWS based computing. To support that there is a growing public data set AWS S3 bucket at <code>fh-ctr-public-reference-data</code>. Contact Amy Paguirigan if you’d like something to be added here and we can help you do that.</p>

</div>
</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="about-the-authors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
