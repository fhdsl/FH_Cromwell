<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Using the fh.wdlR Package | WDL 101: Running WDLs using Cromwell</title>
  <meta name="description" content="An introduction to using the workflow manager software Cromwell to run WDL workflows using the Fred Hutch computing cluster." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Using the fh.wdlR Package | WDL 101: Running WDLs using Cromwell" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to using the workflow manager software Cromwell to run WDL workflows using the Fred Hutch computing cluster." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Using the fh.wdlR Package | WDL 101: Running WDLs using Cromwell" />
  
  <meta name="twitter:description" content="An introduction to using the workflow manager software Cromwell to run WDL workflows using the Fred Hutch computing cluster." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="cromwell-at-the-fred-hutch.html"/>
<link rel="next" href="about-the-authors.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://hutchdatascience.org/" target="_blank"><img src="assets/big-dasl-stacked.png" style="width: 80%; padding-left: 15px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#pre-requisites"><i class="fa fa-check"></i><b>1.1</b> Pre-Requisites</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#rhino-access"><i class="fa fa-check"></i><b>1.1.1</b> <code>rhino</code> Access</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#aws-credentials"><i class="fa fa-check"></i><b>1.1.2</b> AWS Credentials</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-is-cromwell"><i class="fa fa-check"></i><b>1.2</b> What is Cromwell?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#getting-started-with-cromwell"><i class="fa fa-check"></i><b>1.3</b> Getting Started with Cromwell</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#database-setup"><i class="fa fa-check"></i><b>1.3.1</b> Database Setup</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#start-up-a-cromwell-server"><i class="fa fa-check"></i><b>1.3.2</b> Start up a Cromwell server</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="using-shiny-to-manage-workflows.html"><a href="using-shiny-to-manage-workflows.html"><i class="fa fa-check"></i><b>2</b> Using Shiny to Manage Workflows</a>
<ul>
<li class="chapter" data-level="2.1" data-path="using-shiny-to-manage-workflows.html"><a href="using-shiny-to-manage-workflows.html#cromwell-app"><i class="fa fa-check"></i><b>2.1</b> Cromwell app</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="using-shiny-to-manage-workflows.html"><a href="using-shiny-to-manage-workflows.html#login"><i class="fa fa-check"></i><b>2.1.1</b> Login</a></li>
<li class="chapter" data-level="2.1.2" data-path="using-shiny-to-manage-workflows.html"><a href="using-shiny-to-manage-workflows.html#submit-jobs-tab"><i class="fa fa-check"></i><b>2.1.2</b> Submit Jobs Tab</a></li>
<li class="chapter" data-level="2.1.3" data-path="using-shiny-to-manage-workflows.html"><a href="using-shiny-to-manage-workflows.html#track-jobs-tab"><i class="fa fa-check"></i><b>2.1.3</b> Track Jobs Tab</a></li>
<li class="chapter" data-level="2.1.4" data-path="using-shiny-to-manage-workflows.html"><a href="using-shiny-to-manage-workflows.html#run-test-workflows"><i class="fa fa-check"></i><b>2.1.4</b> Run Test Workflows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html"><i class="fa fa-check"></i><b>3</b> Cromwell at the Fred Hutch</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html#standard-runtime-variables"><i class="fa fa-check"></i><b>3.1</b> Standard Runtime Variables</a></li>
<li class="chapter" data-level="3.2" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html#fred-hutch-custom-runtime-variables"><i class="fa fa-check"></i><b>3.2</b> Fred Hutch Custom Runtime Variables</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html#software-environments"><i class="fa fa-check"></i><b>3.2.1</b> Software environments</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html#guidance-and-support"><i class="fa fa-check"></i><b>3.3</b> Guidance and Support</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html#effective-computing-user-group"><i class="fa fa-check"></i><b>3.3.1</b> Effective Computing User Group</a></li>
<li class="chapter" data-level="3.3.2" data-path="cromwell-at-the-fred-hutch.html"><a href="cromwell-at-the-fred-hutch.html#slack-workflow-managers"><i class="fa fa-check"></i><b>3.3.2</b> Slack Workflow Managers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html"><i class="fa fa-check"></i><b>4</b> Using the <code>fh.wdlR</code> Package</a>
<ul>
<li class="chapter" data-level="4.1" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html#install-from-github"><i class="fa fa-check"></i><b>4.1</b> Install from GitHub</a></li>
<li class="chapter" data-level="4.2" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html#example-workflow-process"><i class="fa fa-check"></i><b>4.2</b> Example workflow process</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html#validate-your-workflow-using-womtool"><i class="fa fa-check"></i><b>4.2.1</b> Validate your workflow using Womtool</a></li>
<li class="chapter" data-level="4.2.2" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html#submit-workflows"><i class="fa fa-check"></i><b>4.2.2</b> Submit Workflows</a></li>
<li class="chapter" data-level="4.2.3" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html#track-workflows"><i class="fa fa-check"></i><b>4.2.3</b> Track Workflows</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="using-the-fh.wdlr-package.html"><a href="using-the-fh.wdlr-package.html#look-under-the-hood"><i class="fa fa-check"></i><b>4.3</b> Look Under the Hood</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="5" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>5</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="https://hutchdatascience.org/"> The Fred Hutch Data Science Lab </a></p>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">WDL 101: Running WDLs using Cromwell</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/dasl_thin_main_image.png">
</div>
<div id="using-the-fh.wdlr-package" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Using the <code>fh.wdlR</code> Package</h1>
<p>The Shiny app deployed at Fred Hutch to allow users to submit workflows to running Crowmell servers is built using an R package which is freely available in GitHub.</p>
<p><a href="https://github.com/FredHutch/fh.wdlR" class="uri">https://github.com/FredHutch/fh.wdlR</a></p>
<p>This R package allows you to use R/RStudio on your local machine (on VPN or on campus) to directly submit workflows to your server from the command line, and lets you track calls and workflow execution status directly.</p>
<div id="install-from-github" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Install from GitHub</h2>
<p>You will need the following packages installed first:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="using-the-fh.wdlr-package.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="at">pkgs =</span> <span class="fu">c</span>(<span class="st">&quot;httr&quot;</span>, <span class="st">&quot;jsonlite&quot;</span>, <span class="st">&quot;magrittr&quot;</span>,</span>
<span id="cb9-2"><a href="using-the-fh.wdlr-package.html#cb9-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;ssh&quot;</span>, <span class="st">&quot;purrr&quot;</span>, <span class="st">&quot;paws&quot;</span>, <span class="st">&quot;tidyr&quot;</span>))</span>
<span id="cb9-3"><a href="using-the-fh.wdlr-package.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="using-the-fh.wdlr-package.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Not required for the package but certainly handy and used in our demo here:</span></span>
<span id="cb9-5"><a href="using-the-fh.wdlr-package.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Then you can install the most recent version of <code>fh.wdlR</code> by:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="using-the-fh.wdlr-package.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(remotes)</span>
<span id="cb10-2"><a href="using-the-fh.wdlr-package.html#cb10-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;FredHutch/fh.wdlR&#39;</span>)</span></code></pre></div>
<p>Install a specific release version (in this case v2.0.2) by:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="using-the-fh.wdlr-package.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(remotes)</span>
<span id="cb11-2"><a href="using-the-fh.wdlr-package.html#cb11-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;FredHutch/fh.wdlR@v2.0.2&#39;</span>)</span></code></pre></div>
</div>
<div id="example-workflow-process" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Example workflow process</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="using-the-fh.wdlr-package.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Load packages</span></span>
<span id="cb12-2"><a href="using-the-fh.wdlr-package.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fh.wdlR); <span class="fu">library</span>(tidyverse);</span></code></pre></div>
<p>Tell your R session how to find your Cromwell server (note you’ll need to be on campus or on VPN).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="using-the-fh.wdlr-package.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Set your Cromwell URL</span></span>
<span id="cb13-2"><a href="using-the-fh.wdlr-package.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setCromwellURL</span>(<span class="at">nodeAndPort =</span> <span class="st">&quot;gizmoXXX:20202&quot;</span>)</span></code></pre></div>
<div id="validate-your-workflow-using-womtool" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Validate your workflow using Womtool</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="using-the-fh.wdlr-package.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;*.wdl&quot;</span>)</span>
<span id="cb14-2"><a href="using-the-fh.wdlr-package.html#cb14-2" aria-hidden="true" tabindex="-1"></a>valid <span class="ot">&lt;-</span> <span class="fu">womtoolValidate</span>(<span class="at">WDL =</span> <span class="st">&quot;myworkflow.wdl&quot;</span>); valid[[<span class="st">&quot;errors&quot;</span>]]</span></code></pre></div>
<p>Go fix your issues, now send your workflow to Crowmell.</p>
</div>
<div id="submit-workflows" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Submit Workflows</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="using-the-fh.wdlr-package.html#cb15-1" aria-hidden="true" tabindex="-1"></a>thisJob <span class="ot">&lt;-</span> <span class="fu">cromwellSubmitBatch</span>(<span class="at">WDL =</span> <span class="st">&quot;myworkflow.wdl&quot;</span>,</span>
<span id="cb15-2"><a href="using-the-fh.wdlr-package.html#cb15-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Params =</span> <span class="st">&quot;myworkflow-parameters.json&quot;</span>,</span>
<span id="cb15-3"><a href="using-the-fh.wdlr-package.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Batch =</span> <span class="st">&quot;myworkflow-batch.json&quot;</span>,</span>
<span id="cb15-4"><a href="using-the-fh.wdlr-package.html#cb15-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Options =</span> <span class="st">&quot;workflow-options.json&quot;</span>)</span>
<span id="cb15-5"><a href="using-the-fh.wdlr-package.html#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="using-the-fh.wdlr-package.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># thisJob$id is now the unique Cromwell ID for your entire workflow - you can use that to request all sorts of metadata!!!</span></span>
<span id="cb15-7"><a href="using-the-fh.wdlr-package.html#cb15-7" aria-hidden="true" tabindex="-1"></a>thisOne<span class="ot">&lt;-</span> thisJob<span class="sc">$</span>id; thisOne</span></code></pre></div>
<p>Now get all your metadata and track the workflow!!</p>
</div>
<div id="track-workflows" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Track Workflows</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="using-the-fh.wdlr-package.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns a data frame of all jobs run in the past number of days (uses your database)</span></span>
<span id="cb16-2"><a href="using-the-fh.wdlr-package.html#cb16-2" aria-hidden="true" tabindex="-1"></a>jobs <span class="ot">&lt;-</span> <span class="fu">cromwellJobs</span>(<span class="at">days =</span> <span class="dv">2</span>)</span>
<span id="cb16-3"><a href="using-the-fh.wdlr-package.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="using-the-fh.wdlr-package.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns a data frame (one line if you only submit one workflow id) containing workflow level metadata</span></span>
<span id="cb16-5"><a href="using-the-fh.wdlr-package.html#cb16-5" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">cromwellWorkflow</span>(thisOne)</span>
<span id="cb16-6"><a href="using-the-fh.wdlr-package.html#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="using-the-fh.wdlr-package.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># This is handy to print the current status of the workflow(s) is(are)</span></span>
<span id="cb16-8"><a href="using-the-fh.wdlr-package.html#cb16-8" aria-hidden="true" tabindex="-1"></a>w<span class="sc">$</span>status</span>
<span id="cb16-9"><a href="using-the-fh.wdlr-package.html#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="using-the-fh.wdlr-package.html#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns a data frame containing all call level metadata</span></span>
<span id="cb16-11"><a href="using-the-fh.wdlr-package.html#cb16-11" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">cromwellCall</span>(thisOne)</span>
<span id="cb16-12"><a href="using-the-fh.wdlr-package.html#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="using-the-fh.wdlr-package.html#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Handy set of dplyr commands to tell you about how the various calls are doing</span></span>
<span id="cb16-14"><a href="using-the-fh.wdlr-package.html#cb16-14" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(callName, executionStatus) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">status =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(executionStatus)</span>
<span id="cb16-15"><a href="using-the-fh.wdlr-package.html#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="using-the-fh.wdlr-package.html#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns a data frame containing call level call caching  metadata</span></span>
<span id="cb16-17"><a href="using-the-fh.wdlr-package.html#cb16-17" aria-hidden="true" tabindex="-1"></a>ca <span class="ot">&lt;-</span> <span class="fu">cromwellCache</span>(thisOne)</span>
<span id="cb16-18"><a href="using-the-fh.wdlr-package.html#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="using-the-fh.wdlr-package.html#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Handy set of dplyr commands to tell you about what sort of call caching is happening</span></span>
<span id="cb16-20"><a href="using-the-fh.wdlr-package.html#cb16-20" aria-hidden="true" tabindex="-1"></a>ca <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(callCaching.hit, callName) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">hits =</span> <span class="fu">n</span>())</span>
<span id="cb16-21"><a href="using-the-fh.wdlr-package.html#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="using-the-fh.wdlr-package.html#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Opens up a popup in your browser with a timing diagram in it.</span></span>
<span id="cb16-23"><a href="using-the-fh.wdlr-package.html#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="fu">cromwellTiming</span>(thisOne)</span>
<span id="cb16-24"><a href="using-the-fh.wdlr-package.html#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="using-the-fh.wdlr-package.html#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns a data frame containing call level failure metadata</span></span>
<span id="cb16-26"><a href="using-the-fh.wdlr-package.html#cb16-26" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">cromwellFailures</span>(thisOne)</span>
<span id="cb16-27"><a href="using-the-fh.wdlr-package.html#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="using-the-fh.wdlr-package.html#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Will tell Cromwell to abort the current workflow - note this cannot be undone and it will take a while to stop all the jobs.  </span></span>
<span id="cb16-29"><a href="using-the-fh.wdlr-package.html#cb16-29" aria-hidden="true" tabindex="-1"></a>abort <span class="ot">&lt;-</span> <span class="fu">cromwellAbort</span>(thisOne)</span>
<span id="cb16-30"><a href="using-the-fh.wdlr-package.html#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="using-the-fh.wdlr-package.html#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co"># When a workflow is done, request information about the workflow outputs.</span></span>
<span id="cb16-32"><a href="using-the-fh.wdlr-package.html#cb16-32" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">cromwellOutputs</span>(thisOne)</span></code></pre></div>
</div>
</div>
<div id="look-under-the-hood" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Look Under the Hood</h2>
<p>When all else fails, pick through the ugly metadata yourself to see what’s happening.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="using-the-fh.wdlr-package.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ugly list of raw metadata should you need it for workflow troubleshooting</span></span>
<span id="cb17-2"><a href="using-the-fh.wdlr-package.html#cb17-2" aria-hidden="true" tabindex="-1"></a>WTF <span class="ot">&lt;-</span> <span class="fu">cromwellGlob</span>(thisOne); WTF[[<span class="st">&quot;failures&quot;</span>]]</span></code></pre></div>

</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="cromwell-at-the-fred-hutch.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="about-the-authors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
